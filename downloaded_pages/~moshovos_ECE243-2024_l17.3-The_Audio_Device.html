<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1253">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 15">
<meta name=Originator content="Microsoft Word 15">
<link rel=File-List href="l17.3-The_Audio_Device_files/filelist.xml">
<link rel=Edit-Time-Data href="l17.3-The_Audio_Device_files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>Lecture 2</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Name</o:Author>
  <o:LastAuthor>Andreas Moshovos</o:LastAuthor>
  <o:Revision>27</o:Revision>
  <o:TotalTime>1246</o:TotalTime>
  <o:Created>2024-02-11T19:46:00Z</o:Created>
  <o:LastSaved>2024-02-15T02:34:00Z</o:LastSaved>
  <o:Pages>7</o:Pages>
  <o:Words>2780</o:Words>
  <o:Characters>15852</o:Characters>
  <o:Company>Organization</o:Company>
  <o:Lines>132</o:Lines>
  <o:Paragraphs>37</o:Paragraphs>
  <o:CharactersWithSpaces>18595</o:CharactersWithSpaces>
  <o:Version>16.00</o:Version>
 </o:DocumentProperties>
</xml><![endif]-->
<link rel=themeData href="l17.3-The_Audio_Device_files/themedata.thmx">
<link rel=colorSchemeMapping
href="l17.3-The_Audio_Device_files/colorschememapping.xml">
<!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:View>Print</w:View>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:TrackMoves>false</w:TrackMoves>
  <w:TrackFormatting/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-US</w:LidThemeOther>
  <w:LidThemeAsian>X-NONE</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:SplitPgBreakAndParaMark/>
   <w:DontVertAlignCellWithSp/>
   <w:DontBreakConstrainedForcedTables/>
   <w:DontVertAlignInTxbx/>
   <w:Word11KerningPairs/>
   <w:CachedColBalance/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="false"
  DefSemiHidden="false" DefQFormat="false" LatentStyleCount="376">
  <w:LsdException Locked="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Normal Table"/>
  <w:LsdException Locked="false" Priority="99" Name="No List"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Simple 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Simple 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Simple 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Classic 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Classic 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Classic 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Classic 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Colorful 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Colorful 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Colorful 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 6"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 7"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 8"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 6"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 7"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 8"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table 3D effects 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table 3D effects 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table 3D effects 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Contemporary"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Elegant"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Professional"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Subtle 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Subtle 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Web 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Web 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Web 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Theme"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" QFormat="true"
   Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" QFormat="true"
   Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" QFormat="true"
   Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" QFormat="true"
   Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" QFormat="true"
   Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" QFormat="true"
   Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" SemiHidden="true"
   UnhideWhenUsed="true" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="TOC Heading"/>
  <w:LsdException Locked="false" Priority="41" Name="Plain Table 1"/>
  <w:LsdException Locked="false" Priority="42" Name="Plain Table 2"/>
  <w:LsdException Locked="false" Priority="43" Name="Plain Table 3"/>
  <w:LsdException Locked="false" Priority="44" Name="Plain Table 4"/>
  <w:LsdException Locked="false" Priority="45" Name="Plain Table 5"/>
  <w:LsdException Locked="false" Priority="40" Name="Grid Table Light"/>
  <w:LsdException Locked="false" Priority="46" Name="Grid Table 1 Light"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark"/>
  <w:LsdException Locked="false" Priority="51" Name="Grid Table 6 Colorful"/>
  <w:LsdException Locked="false" Priority="52" Name="Grid Table 7 Colorful"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 1"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 1"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 1"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 1"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 1"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 2"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 2"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 2"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 2"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 2"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 3"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 3"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 3"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 3"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 3"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 4"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 4"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 4"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 4"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 4"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 5"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 5"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 5"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 5"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 5"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 6"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 6"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 6"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 6"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 6"/>
  <w:LsdException Locked="false" Priority="46" Name="List Table 1 Light"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark"/>
  <w:LsdException Locked="false" Priority="51" Name="List Table 6 Colorful"/>
  <w:LsdException Locked="false" Priority="52" Name="List Table 7 Colorful"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 1"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 1"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 1"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 1"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 1"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 2"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 2"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 2"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 2"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 2"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 3"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 3"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 3"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 3"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 3"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 4"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 4"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 4"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 4"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 4"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 5"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 5"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 5"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 5"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 5"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 6"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 6"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 6"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 6"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 6"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="Mention"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="Smart Hyperlink"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="Hashtag"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="Unresolved Mention"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   UnhideWhenUsed="true" Name="Smart Link"/>
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:Batang;
	panose-1:2 3 6 0 0 1 1 1 1 1;
	mso-font-alt:Batang;
	mso-font-charset:129;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1342176593 1775729915 48 0 524447 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-536869121 1107305727 33554432 0 415 0;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:-520081665 -1073717157 41 0 66047 0;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:-536869121 64767 1 0 415 0;}
@font-face
	{font-family:"\@Batang";
	panose-1:2 3 6 0 0 1 1 1 1 1;
	mso-font-charset:129;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1342176593 1775729915 48 0 524447 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:"";
	margin:0in;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:Batang;}
p.MsoPlainText, li.MsoPlainText, div.MsoPlainText
	{mso-style-unhide:no;
	mso-style-link:"Plain Text Char";
	margin:0in;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:Batang;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-unhide:no;
	mso-style-link:"Balloon Text Char";
	margin:0in;
	mso-pagination:widow-orphan;
	font-size:8.0pt;
	font-family:"Tahoma",sans-serif;
	mso-fareast-font-family:Batang;}
p.msonormal0, li.msonormal0, div.msonormal0
	{mso-style-name:msonormal;
	mso-style-unhide:no;
	mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;
	mso-fareast-font-family:"Times New Roman";
	mso-fareast-theme-font:minor-fareast;}
span.PlainTextChar
	{mso-style-name:"Plain Text Char";
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"Plain Text";
	mso-ansi-font-size:10.5pt;
	mso-bidi-font-size:10.5pt;
	font-family:Consolas;
	mso-ascii-font-family:Consolas;
	mso-fareast-font-family:Batang;
	mso-hansi-font-family:Consolas;
	mso-bidi-font-family:Consolas;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"Balloon Text";
	mso-ansi-font-size:8.0pt;
	mso-bidi-font-size:8.0pt;
	font-family:"Tahoma",sans-serif;
	mso-ascii-font-family:Tahoma;
	mso-fareast-font-family:Batang;
	mso-hansi-font-family:Tahoma;
	mso-bidi-font-family:Tahoma;}
span.SpellE
	{mso-style-name:"";
	mso-spl-e:yes;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
.MsoChpDefault
	{mso-style-type:export-only;
	mso-default-props:yes;
	font-size:10.0pt;
	mso-ansi-font-size:10.0pt;
	mso-bidi-font-size:10.0pt;
	mso-font-kerning:0pt;
	mso-ligatures:none;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 65.95pt 1.0in 65.95pt;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 @list l0
	{mso-list-id:567695933;
	mso-list-type:hybrid;
	mso-list-template-ids:1444051568 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l0:level2
	{mso-level-number-format:bullet;
	mso-level-text:o;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:"Courier New";}
@list l0:level3
	{mso-level-number-format:bullet;
	mso-level-text:\F0A7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Wingdings;}
@list l0:level4
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l0:level5
	{mso-level-number-format:bullet;
	mso-level-text:o;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:"Courier New";}
@list l0:level6
	{mso-level-number-format:bullet;
	mso-level-text:\F0A7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Wingdings;}
@list l0:level7
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l0:level8
	{mso-level-number-format:bullet;
	mso-level-text:o;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:"Courier New";}
@list l0:level9
	{mso-level-number-format:bullet;
	mso-level-text:\F0A7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Wingdings;}
@list l1
	{mso-list-id:965349350;
	mso-list-type:hybrid;
	mso-list-template-ids:1013896124 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l1:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l1:level2
	{mso-level-number-format:bullet;
	mso-level-text:o;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:"Courier New";}
@list l1:level3
	{mso-level-number-format:bullet;
	mso-level-text:\F0A7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Wingdings;}
@list l1:level4
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l1:level5
	{mso-level-number-format:bullet;
	mso-level-text:o;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:"Courier New";}
@list l1:level6
	{mso-level-number-format:bullet;
	mso-level-text:\F0A7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Wingdings;}
@list l1:level7
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l1:level8
	{mso-level-number-format:bullet;
	mso-level-text:o;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:"Courier New";}
@list l1:level9
	{mso-level-number-format:bullet;
	mso-level-text:\F0A7;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Wingdings;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman",serif;}
table.MsoTableGrid
	{mso-style-name:"Table Grid";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-unhide:no;
	border:solid windowtext 1.0pt;
	mso-border-alt:solid windowtext .5pt;
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-border-insideh:.5pt solid windowtext;
	mso-border-insidev:.5pt solid windowtext;
	mso-para-margin:0in;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman",serif;}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="1026"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=EN-US style='tab-interval:.5in;word-wrap:break-word'>

<div class=WordSection1>

<p class=MsoPlainText>ECE243</p>

<p class=MsoPlainText>Andreas Moshovos</p>

<p class=MsoPlainText>Feb 2024</p>

<p class=MsoPlainText><o:p>&nbsp;</o:p></p>

<p class=MsoPlainText><b><span style='font-family:"Times New Roman",serif'>The
Audio Device<o:p></o:p></span></b></p>

<p class=MsoPlainText><o:p>&nbsp;</o:p></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>On
our lab board there is also an audio device that can record and generate “audio”
signals (will clarify we refer to “audio” and not plain audio). The core of the
audio device is an analog to/from digital converter. The Analog to Digital
Converter (ADC) converting analog “audio” <i>input </i>signals into digital
samples (will explain shortly) that the CPU can then read and manipulate.
The<span style='mso-spacerun:yes'>   </span>Digital to Analog Converter (DAC) <span
class=GramE>perform</span> the reverse function: it accepts digital samples
from the CPU and converts them into <span class=GramE>analog<span
style='mso-spacerun:yes'>  </span>“</span>audio” signals.<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><i><span style='font-family:
"Times New Roman",serif'>What is Audio?<o:p></o:p></span></i></p>

<p class=MsoPlainText style='text-align:justify'><i><span style='font-family:
"Times New Roman",serif'><o:p>&nbsp;</o:p></span></i></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>Let
us first discuss what is audio. For the purposes of our discussion (and to
avoid going down a rabbit hole trying to cover every possible nuance of what
audio really can be), audio are back-and-forth movements (displacement) in air
(or any other physical medium) that when they reach our ears are perceived by
us as sound. <o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>The
graph below, for example, shows the displacement that would cause our ears to
perceive a sound. The x-axis shows <span class=GramE>time</span> and the y-axis
shows physical displacement relative to the resting condition (no movement).<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif;
mso-no-proof:yes'><!--[if gte vml 1]><v:shapetype id="_x0000_t75" coordsize="21600,21600"
 o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe" filled="f"
 stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_i1027" type="#_x0000_t75" alt="A graph with a line&#10;&#10;Description automatically generated"
 style='width:480pt;height:93.4pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="l17.3-The_Audio_Device_files/image001.png" o:title="A graph with a line&#10;&#10;Description automatically generated"/>
</v:shape><![endif]--><![if !vml]><img width=640 height=125
src="l17.3-The_Audio_Device_files/image002.gif"
alt="A graph with a line&#10;&#10;Description automatically generated" v:shapes="_x0000_i1027"><![endif]></span><span
style='font-family:"Times New Roman",serif'><o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><i><span style='font-family:
"Times New Roman",serif'>Converting Audio to Digital Form and Back<o:p></o:p></span></i></p>

<p class=MsoPlainText style='text-align:justify'><i><span style='font-family:
"Times New Roman",serif'><o:p>&nbsp;</o:p></span></i></p>

<p class=MsoPlainText style='text-align:justify'><span class=GramE><span
style='font-family:"Times New Roman",serif'>Through the use of</span></span><span
style='font-family:"Times New Roman",serif'> <span class=GramE>sensor</span>
(microphone) and of electronic circuit we can convert sound into digital
information that can then be manipulated by a program. There is not just one
way of going about this. We will restrict attention to what is available to us
on the lab board. An audio converter accepts as input an electrical waveform
where the amplitude (voltage) represents the physical displacement sensed by
the microphone or some other source. The conversion it performs is producing a
digital quantity that represents the input amplitude. In our case, the full
input voltage range is converted the 32b integer number space; meaning, -2^31
is the highest negative voltage and 2^31-1 the highest positive voltage.<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>However,
audio itself is a continuous in time signal, meaning in has a value at any time
instant. Converting voltages to integers takes time and besides executing a
single instruction itself takes some time. Accordingly, the output of the ADC
contains <i>samples </i>of the input voltage signals. A sample is <span
class=GramE>measurement</span> of the input voltage at a particular instant,
and the samples are taken at regular intervals by the audio device. For our
system the sampling frequency is 8KHz, meaning that in one second the device
will produce 8,000 samples, each of 32b. So, what the CPU will be able to “see”
is a sequence of values in time order, which are samples of the input waveform:<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif;
mso-no-proof:yes'><!--[if gte vml 1]><v:shape id="Picture_x0020_2" o:spid="_x0000_i1026"
 type="#_x0000_t75" alt="A graph with blue and black dots&#10;&#10;Description automatically generated"
 style='width:480.4pt;height:94.9pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="l17.3-The_Audio_Device_files/image019.png" o:title="A graph with blue and black dots&#10;&#10;Description automatically generated"/>
</v:shape><![endif]--><![if !vml]><img width=641 height=127
src="l17.3-The_Audio_Device_files/image004.gif"
alt="A graph with blue and black dots&#10;&#10;Description automatically generated"
v:shapes="Picture_x0020_2"><![endif]></span><span style='font-family:"Times New Roman",serif'><o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>For
our example waveform above there the signal repeats every 32 samples. Given
that the sampling frequency is 8KHz the waveform will be perceived as a 250Hz
sound. <o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>Similarly
to the input conversion, the audio device is also capable of “producing” sound
from data written by the processor. The DAC side accepts a sequence of 32b
integers which are converted into voltages at the rate of 8KHz (8,000 samples
per second one per input integer). The resulting voltage waveform and then are
fed to an actuator or any other suitable device to generate or record the
sound. A typical actuator is a speaker which is in its simplest form a surface
(typically cone-line) which can move up and down via an electromagnet. <o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-family:
"Times New Roman",serif'>The Board’s Audio Device<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-family:
"Times New Roman",serif'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>The
actual audio processing device is quite complicated. However, the designers of
the board have hidden much of this complexity from the processor via a mediator
device starting at base address <b>0xFF203040</b>. This is the one we get to
program. It exposes to the CPU the following “registers” in memory:<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif;
mso-no-proof:yes'><!--[if gte vml 1]><v:shape id="Picture_x0020_1" o:spid="_x0000_i1025"
 type="#_x0000_t75" alt="A white rectangular box with black text&#10;&#10;Description automatically generated"
 style='width:480pt;height:109.9pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="l17.3-The_Audio_Device_files/image021.png" o:title="A white rectangular box with black text&#10;&#10;Description automatically generated"/>
</v:shape><![endif]--><![if !vml]><img width=640 height=147
src="l17.3-The_Audio_Device_files/image006.gif"
alt="A white rectangular box with black text&#10;&#10;Description automatically generated"
v:shapes="Picture_x0020_1"><![endif]></span><span style='font-family:"Times New Roman",serif'><o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><i><span style='font-family:
"Times New Roman",serif'><o:p>&nbsp;</o:p></span></i></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>The
device can process and generate two-channel (aka stereo) sound. It has two <i>channels,
</i>left and <span class=GramE>right</span> each with separate input and output
connections.<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-family:
"Times New Roman",serif'>Data Registers: </span></b><span style='font-family:
"Times New Roman",serif'>The <span class=SpellE>leftdata</span> and <span
class=SpellE>rightdata</span> “registers” are read and write ports to the
inputs and outputs of the respective channels. What gets passed through those
registers are 32b integers which are interpreted as audio samples. When we
write to these <span class=GramE>registers</span> we are accessing the output,
and when we read we are accessing the input. There is no way to write to the
input or to read the output.<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>Internally,
these registers are connected to FIFO queues. Writing places one more sample to
the output FIFO and reading returns the next available sample from the input
FIFO.<span style='mso-spacerun:yes'>  </span>There are four FIFOs, two per
channel, one for input and one for output. <br style='mso-special-character:
line-break'>
<![if !supportLineBreakNewLine]><br style='mso-special-character:line-break'>
<![endif]><o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>For
our system each of those FIFOs can contain up to 128 samples. The conversion
from/to the analog side is happening independently of the CPU: <span
class=GramE>as long as</span> there are samples in the output FIFOs (the CPU
has written them) the audio device will convert them to voltages consuming them
in the process and thus draining the output FIFOs. Similarly, <span
class=GramE>as long as</span> there is space in the input FIFOs the audio
device will place samples there for both channels. Effectively, the CPU
delegates work to the audio device asking it to convert to/from samples at a
rate of 8KHz. Note that the CPU can read and write samples much faster than
this conversion rate. To ensure that output audio is perceived as continuous
the CPU must ensure that the output FIFO always has samples to convert.
Similarly, to ensure that no samples are lost when converting an input signal,
the CPU must ensure that it reads them at least at a rate of 8KHz per second.
The fast that the buffers have space for 128 samples makes things easier for
the CPU. It does not have to read and write samples every 1/8000 seconds.
Instead, it <span class=GramE>has to</span> make sure that it keeps up so that
none of the FIFOs is overrun. For example, it could read or write 128 samples
in one go every (1/<span class=GramE>8,000)x</span>128 seconds. <i>This should
be roughly 16ms or, assuming 1 instruction per cycle and a cycle frequency of
100MHz, every 1.9M instructions – it’s a good idea to double-check these
numbers as they could be wrong or even if they are right, it’s nice to <span
class=GramE>have an understanding of</span> the relatively speeds.</i><o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span class=SpellE><b><span
style='font-family:"Times New Roman",serif'>Fifospace</span></b></span><b><span
style='font-family:"Times New Roman",serif'> Registers: </span></b><span
style='font-family:"Times New Roman",serif'>The <span class=SpellE>fifospace</span>
register has four subfields each of 8b. These are occupancy counters for the
four FIFOs:<o:p></o:p></span></p>

<p class=MsoPlainText style='margin-left:.5in;text-align:justify;text-indent:
-.25in;mso-list:l1 level1 lfo2'><![if !supportLists]><span style='font-family:
Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"Times New Roman",serif'>WSLC
and WSRC are the output FIFO occupancy counters respectively for the left and
the right channels. They report how many FIFO entries are currently empty. The
CPU is supposed to check that there is space (counter is not zero) in the
output FIFO before writing another sample. <o:p></o:p></span></p>

<p class=MsoPlainText style='margin-left:.5in;text-align:justify;text-indent:
-.25in;mso-list:l1 level1 lfo2'><![if !supportLists]><span style='font-family:
Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"Times New Roman",serif'>RALC
and RARC are the input FIFO occupancy counters respectively for the left and
right channels. They report how many input samples are available for the CPU to
read. The CPU is supposed to check that these are non-zero before attempting to
read a sample.<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span class=GramE><b><span
style='font-family:"Times New Roman",serif'>Control<span
style='mso-spacerun:yes'>  </span>Register</span></b></span><b><span
style='font-family:"Times New Roman",serif'>: </span></b><span
style='font-family:"Times New Roman",serif'>It contains several bit fields that
the CPU is can use to control the device and get status information. <o:p></o:p></span></p>

<p class=MsoPlainText style='margin-left:.5in;text-align:justify;text-indent:
-.25in;mso-list:l0 level1 lfo4'><![if !supportLists]><span style='font-family:
Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"Times New Roman",serif'>By
writing 1 to <span class=GramE>CW<span style='mso-spacerun:yes'>  </span>the</span>
CPU clears the output FIFOs. <span class=GramE>Both of them</span>. This
remains effective until the bit is cleared. <span class=GramE>So</span> the CPU
has to first write 1 and then <span class=GramE>to write</span> 0 for output
conversion to “resume” – the audio output will always have a voltage which in
the absence of actual samples in the output FIFOs will be at “rest”.<o:p></o:p></span></p>

<p class=MsoPlainText style='margin-left:.5in;text-align:justify;text-indent:
-.25in;mso-list:l0 level1 lfo4'><![if !supportLists]><span style='font-family:
Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"Times New Roman",serif'>By
writing 1 to CR the CPU clears the input FIFOs. <span class=GramE>Again</span>
both of them. As with CW, the FIFOs remain empty until the CPU writes a 0 to
this bit.<o:p></o:p></span></p>

<p class=MsoPlainText style='margin-left:.5in;text-align:justify;text-indent:
-.25in;mso-list:l0 level1 lfo4'><![if !supportLists]><span style='font-family:
Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"Times New Roman",serif'>WE
and RE are interrupt enable bits respectively for output and input, whereas WI
and RI are interrupt indicators. The CPU can enable <span class=GramE>interrupts</span>
by writing a 1 to WE and/or RE. The audio device will request output <span
class=GramE>interrupts</span> when the output FIFO are less <span class=SpellE>then</span>
25% full. The idea here is that the CPU can then have some time to fill in the
output queue to ensure that the output conversion never runs out of samples
(maintain continuity in the signal). This is a head’s up for the CPU which <span
class=GramE>now is</span> running against time: the DAC continues to convert
samples from the output FIFO. It <span class=GramE>better be</span> that the
CPU fills it up with more samples before it runs out. The 25% threshold gives
the CPU some time to react and fill in more samples.<o:p></o:p></span></p>

<p class=MsoPlainText style='margin-left:.5in;text-align:justify'><span
style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='margin-left:.5in;text-align:justify'><span
style='font-family:"Times New Roman",serif'>The RE enables input <span
class=GramE>interrupts</span>. This means that the audio device will request
interrupts when it filled at least 75% of the input FIFO. The intention is for
the CPU to go and process those samples. Why 75% full and not 100% full? This
is <span class=GramE>because,</span> it may take some time for the CPU to
accept the interrupt and start processing consuming the samples, and since in
the meantime the ADC is actively producing more samples placing them in the
FIFO.<o:p></o:p></span></p>

<p class=MsoPlainText style='margin-left:.5in;text-align:justify'><span
style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-family:
"Times New Roman",serif'>Programming the Audio Device in C<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-family:
"Times New Roman",serif'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>Let’s
us show how we can program the audio device using C instead of direct assembly.
We can declare pointers to the various registers and use those to read and
write them. Here, we will use a structure definition for our code to be more
readable and manageable. The following structure definition can be used to
access the various registers:<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman"'>struct
<span class=SpellE>audio_t</span> {<o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman"'><span
style='mso-tab-count:1'>      </span>volatile unsigned int <span class=GramE>control;</span><o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman"'><span
style='mso-tab-count:1'>      </span>volatile unsigned char <span class=SpellE><span
class=GramE>rarc</span></span><span class=GramE>;</span><o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman"'><span
style='mso-tab-count:1'>      </span>volatile unsigned char <span class=SpellE><span
class=GramE>ralc</span></span><span class=GramE>;</span><o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman"'><span
style='mso-tab-count:1'>      </span>volatile unsigned char <span class=SpellE><span
class=GramE>wsrc</span></span><span class=GramE>;</span><o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman"'><span
style='mso-tab-count:1'>      </span>volatile unsigned char <span class=SpellE><span
class=GramE>wslc</span></span><span class=GramE>;</span><o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman"'><span
style='mso-spacerun:yes'>      </span>volatile unsigned int <span class=SpellE><span
class=GramE>ldata</span></span><span class=GramE>;</span><o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman"'><span
style='mso-tab-count:1'>      </span>volatile unsigned int <span class=SpellE><span
class=GramE>rdata</span></span><span class=GramE>;</span><o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman"'>};<o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman"'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman"'>struct
<span class=SpellE>audio_t</span> *const <span class=SpellE>audiop</span> =
((struct <span class=SpellE>audio_t</span> *)0xff203040<span class=GramE>);</span><o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:11.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman"'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>The
control register and the FIFO access registers are all defined as unsigned
integers which we know map to words (32b) in our system. We define the <span
class=SpellE>fifospace</span> fields separately using char fields instead <span
class=GramE>of<span style='mso-spacerun:yes'>  </span>a</span><span
style='mso-spacerun:yes'>  </span>single int. Since our CPU is little endian,
the first byte corresponds to <span class=SpellE>rarc</span> and the last to <span
class=SpellE>walc</span>.<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>The
next statement declares <span class=SpellE>audiop</span> as a pointer of
constant value which points to the base address of the audio device. The table
below lists the offsets relative to the base address accessing of the fields
will generate:<o:p></o:p></span></p>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-yfti-tbllook:1184;mso-padding-alt:0in 5.4pt 0in 5.4pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;height:2.0pt'>
  <td width=144 valign=top style='width:107.75pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt;height:2.0pt'>
  <p class=MsoPlainText style='text-align:justify'><b><span style='font-family:
  "Times New Roman",serif'>Field<o:p></o:p></span></b></p>
  </td>
  <td width=54 valign=top style='width:40.5pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt;height:2.0pt'>
  <p class=MsoPlainText style='text-align:justify'><b><span style='font-family:
  "Times New Roman",serif'>Offset<o:p></o:p></span></b></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=144 valign=top style='width:107.75pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoPlainText style='text-align:justify'><span class=SpellE>audiop</span>-&gt;control</p>
  </td>
  <td width=54 valign=top style='width:40.5pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoPlainText style='text-align:justify'>+0</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td width=144 valign=top style='width:107.75pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoPlainText style='text-align:justify'><span class=SpellE>audiop</span>-&gt;<span
  class=SpellE>rarc</span></p>
  </td>
  <td width=54 valign=top style='width:40.5pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoPlainText style='text-align:justify'>+4</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td width=144 valign=top style='width:107.75pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoPlainText style='text-align:justify'><span class=SpellE>audiop</span>-&gt;<span
  class=SpellE>ralc</span></p>
  </td>
  <td width=54 valign=top style='width:40.5pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoPlainText style='text-align:justify'>+5</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4'>
  <td width=144 valign=top style='width:107.75pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoPlainText style='text-align:justify'><span class=SpellE>audiop</span>-&gt;<span
  class=SpellE>wsrc</span></p>
  </td>
  <td width=54 valign=top style='width:40.5pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoPlainText style='text-align:justify'>+6</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5'>
  <td width=144 valign=top style='width:107.75pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoPlainText style='text-align:justify'><span class=SpellE>audiop</span>-&gt;<span
  class=SpellE>wslc</span></p>
  </td>
  <td width=54 valign=top style='width:40.5pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoPlainText style='text-align:justify'>+7</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:6'>
  <td width=144 valign=top style='width:107.75pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoPlainText style='text-align:justify'><span class=SpellE>audiop</span>-&gt;<span
  class=SpellE>ldata</span></p>
  </td>
  <td width=54 valign=top style='width:40.5pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoPlainText style='text-align:justify'>+8</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:7;mso-yfti-lastrow:yes'>
  <td width=144 valign=top style='width:107.75pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoPlainText style='text-align:justify'><span class=SpellE>audiop</span>-&gt;<span
  class=SpellE>rdata</span></p>
  </td>
  <td width=54 valign=top style='width:40.5pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoPlainText style='text-align:justify'>+12</p>
  </td>
 </tr>
</table>

<p class=MsoPlainText style='text-align:justify'><o:p>&nbsp;</o:p></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-family:
"Times New Roman",serif'>Audio Output<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-family:
"Times New Roman",serif'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>Let
us first see how we can output audio. Here’s a C function that outputs a waveform
of n sample on both output channels. The <span class=GramE>for loop</span>
repeats until all n samples have been sent the audio device. It uses polling to
check whether there is space available on the output FIFOs. Any time space is
available it places a sample value by copying it twice, once per channel. The
outer for loop repeats until all n samples have been sent.<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'>void <o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span class=SpellE><b><span
style='font-size:9.0pt;color:#1F497D;mso-themecolor:text2'>audio_<span
class=GramE>tone</span></span></b></span><span class=GramE><b><span
style='font-size:9.0pt;color:#1F497D;mso-themecolor:text2'>(</span></b></span><b><span
style='font-size:9.0pt;color:#1F497D;mso-themecolor:text2'>int n) {<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>            </span>int <span class=SpellE>i</span>, s
= <span class=GramE>0;</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>            </span><span class=SpellE>audiop</span>-&gt;control
= 0x8; // clear the output FIFOs<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>            </span><span class=SpellE>audiop</span>-&gt;control
= 0x0; // resume output conversion<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>            </span>for (<span class=SpellE>i</span> =
0; <span class=SpellE>i</span> &lt; n; <span class=SpellE>i</span>++) // out n
samples<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>              </span>// output data if there is space
in the output FIFOs<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>              </span>if ((<span class=SpellE>audiop</span>-&gt;<span
class=SpellE><span class=GramE>wsrc</span></span><span class=GramE> !</span>=
0) &amp;&amp; (<span class=SpellE>audiop</span>-&gt;<span class=SpellE>wslc</span>
!= 0)) {<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span style='mso-tab-count:2'>              </span><span
style='mso-spacerun:yes'>    </span><span class=SpellE>audiop</span>-&gt;<span
class=SpellE>ldata</span> = <span class=GramE>s;</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                  </span><span class=SpellE>audiop</span>-&gt;<span
class=SpellE>rdata</span> = <span class=GramE>s;</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                  </span>s = <span class=SpellE>sample_next</span>(s);
// get next sample of sawtooth waveform<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>              </span>}<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'>}<span style='mso-tab-count:1'>      </span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>The
<span class=SpellE>sample_<span class=GramE>next</span></span><span
class=GramE>(</span>) helper function generate the samples of a sawtooth wave
form. It takes a single parameter <span class=SpellE>sample_c</span>, which is
the current sample value, and returns the next in the sequence sample for the
desired waveform. In our case it generates the following sample sequence, 0, S,
2S, 3S, 4S, SMAX, SMIN, SMIN+S, SMIN+2S, …, 0, S, 2S, … and so on. S =
SAWTOOTH_STEP, SMIN = SAWTOOTH_MIN, SMAX=SAWTOOTH_MAX constants as defined
below. This is a helper function and could be replaced with any other. Our
focus here is on the way we communicate with the audio device above.<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>Since
the output channels perform conversion in parallel, and since we are placing a
value in <span class=GramE>both of them</span> at the same time, suffices to
check one of the occupancy counters:<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'>void <o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span class=SpellE><b><span
style='font-size:9.0pt;color:#1F497D;mso-themecolor:text2'>audio_<span
class=GramE>tone</span></span></b></span><span class=GramE><b><span
style='font-size:9.0pt;color:#1F497D;mso-themecolor:text2'>(</span></b></span><b><span
style='font-size:9.0pt;color:#1F497D;mso-themecolor:text2'>int n) {<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>            </span>int <span class=SpellE>i</span>, s
= <span class=GramE>0;</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>            </span><span class=SpellE>audiop</span>-&gt;control
= 0x8; // clear the output FIFOs<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>            </span><span class=SpellE>audiop</span>-&gt;control
= 0x0; // resume output conversion<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>            </span>for (<span class=SpellE>i</span> =
0; <span class=SpellE>i</span> &lt; n; <span class=SpellE>i</span>++) // out n
samples<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>              </span>// output data if there is space
in the output FIFOs<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>              </span>if (<span class=SpellE>audiop</span>-&gt;<span
class=SpellE><span class=GramE>wsrc</span></span><span class=GramE> !</span>=0)
{<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span style='mso-tab-count:2'>              </span><span
style='mso-spacerun:yes'>    </span><span class=SpellE>audiop</span>-&gt;<span
class=SpellE>ldata</span> = <span class=GramE>s;</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                  </span><span class=SpellE>audiop</span>-&gt;<span
class=SpellE>rdata</span> = <span class=GramE>s;</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                  </span>s = <span class=SpellE>sample_next</span>(s);
// get next sample of sawtooth waveform<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>              </span>}<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'>}<span style='mso-tab-count:1'>      </span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>The
function below <span class=SpellE>playsback</span> the samples stored in an
array. It assumes that the array contains samples for monophonic sound and
copies the same sample to both channels at the same time.<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'>void <o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span class=SpellE><b><span
style='font-size:9.0pt;color:#1F497D;mso-themecolor:text2'>audio_playback_<span
class=GramE>mono</span></span></b></span><span class=GramE><b><span
style='font-size:9.0pt;color:#1F497D;mso-themecolor:text2'>(</span></b></span><b><span
style='font-size:9.0pt;color:#1F497D;mso-themecolor:text2'>int *samples, int n)
{<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>            </span>int <span class=SpellE><span
class=GramE>i</span></span><span class=GramE>;</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>            </span><span class=SpellE>audiop</span>-&gt;control
= 0x8; // clear the output FIFOs<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>            </span><span class=SpellE>audiop</span>-&gt;control
= 0x0; // resume input conversion<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>            </span>for (<span class=SpellE>i</span> =
0; <span class=SpellE>i</span> &lt; n; <span class=SpellE>i</span>++) {<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>              </span>// output data if there is space
in the output FIFOs<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>              </span>if (<span class=SpellE>audiop</span>-&gt;<span
class=SpellE>wsrc</span>) {<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                  </span><span class=SpellE>audiop</span>-&gt;<span
class=SpellE>ldata</span> = samples[<span class=SpellE>i</span><span
class=GramE>];</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                  </span><span class=SpellE>audiop</span>-&gt;<span
class=SpellE>rdata</span> = samples[<span class=SpellE>i</span><span
class=GramE>];</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>              </span>}<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>             </span>}<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'>}<span style='mso-tab-count:1'>      </span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>An
example of what the <span class=GramE>samples[</span>] array could be follows.
It’s just an array of 32b integers.<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-family:
"Times New Roman",serif'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span class=SpellE><span
class=GramE><b><span lang=FR style='font-size:9.0pt;color:#1F497D;mso-themecolor:
text2;mso-ansi-language:FR'>int</span></b></span></span><b><span lang=FR
style='font-size:9.0pt;color:#1F497D;mso-themecolor:text2;mso-ansi-language:
FR'> <span class=SpellE>samples</span>[] = {<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span lang=FR
style='font-size:9.0pt;color:#1F497D;mso-themecolor:text2;mso-ansi-language:
FR'>0xfffbeb96, 0xffb2de9b, 0xffd2add6, 0x0030bc7c,<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'>0x002dab2e, 0x0063c21d, 0x004a0e3e,
0xfff5ede4,<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'>0x004ed094, 0x008c65d8, 0x0075a7fc,
0x009e4ffe,<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'>...<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'>};<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'>int <span class=SpellE>samples_n</span>
= some number; // how many samples are in the array<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-family:
"Times New Roman",serif'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-family:
"Times New Roman",serif'>Record and Playback<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>We
present two functions that respectively record and playback BUF_SIZE audio
samples from both channels. The function, <span class=SpellE>audio_<span
class=GramE>record</span></span><span class=GramE>(</span>) reads the samples
from the input channels and copies them into the following two buffers in
memory. The second function, <span class=SpellE>audio_<span class=GramE>playback</span></span><span
class=GramE>(</span>) reads the samples from these buffers and copies them to
the output buffers. Both channels operate in parallel and are being read and
written at the “same time”.<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-family:
"Times New Roman",serif'>Recording Input Audio<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-family:
"Times New Roman",serif'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt'>int <span class=SpellE>left_<span class=GramE>buffer</span></span><span
class=GramE>[</span>BUF_SIZE];<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt'>int <span class=SpellE>right_<span class=GramE>buffer</span></span><span
class=GramE>[</span>BUF_SIZE];<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt'><span style='mso-spacerun:yes'>          </span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'>void <span class=SpellE>audio_record</span>(void)
{<span style='mso-spacerun:yes'>         </span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>            </span>int <span class=SpellE>buffer_<span
class=GramE>index</span></span><span class=GramE>;</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-size:9.0pt;
color:#1F497D;mso-themecolor:text2'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>            </span><span class=SpellE>audiop</span>-&gt;control
= 0x4; // clear the input FIFOs <o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>            </span><span class=SpellE>audiop</span>-&gt;control
= 0x0; // resume input conversion<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>            </span><span class=SpellE>buffer_index</span>
= <span class=GramE>0;</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>            </span>while (<span class=SpellE>buffer_index</span>
&lt; BUF_SIZE) {<span style='mso-spacerun:yes'>  </span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                </span>// read samples if there are
any in the input FIFOs<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                </span>if (<span class=SpellE>audiop</span>-&gt;<span
class=SpellE>rarc</span>) {<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                      </span><span class=SpellE>left_buffer</span>[<span
class=SpellE>buffer_index</span>] = <span class=SpellE>audiop</span>-&gt;<span
class=SpellE><span class=GramE>ldata</span></span><span class=GramE>;</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                      </span><span class=SpellE>right_buffer</span>[<span
class=SpellE>buffer_index</span>] = <span class=SpellE>audiop</span>-&gt;<span
class=SpellE><span class=GramE>rdata</span></span><span class=GramE>;</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                      </span>++<span class=SpellE>buffer_<span
class=GramE>index</span></span><span class=GramE>;</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                </span>}<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>            </span>} <o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'>}<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-size:9.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>The
outer while loop repeats until we have read BUF_SIZE samples. The if checks
whether there are samples to read <span class=GramE>at the moment</span> (<span
class=SpellE>audiop</span>-&gt;<span class=SpellE>rarc</span> must be non-zero)
and of course that we have not yet read as many as we wanted (<span
class=SpellE>buffer_index</span> &lt; BUF_SIZE). The code checks only the right
channel counter. This is OK since we are reading from both channels at the same
time.<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>It
then copies into the <span class=SpellE>left_<span class=GramE>buffer</span></span><span
class=GramE>[</span>] and the <span class=SpellE>right_buffer</span>[] one
sample at a time by accessing respectively the <span class=SpellE>audiop</span>-&gt;<span
class=SpellE>ldata</span> and the <span class=SpellE>audiop</span>-&gt;<span
class=SpellE>rdata</span>.<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-family:
"Times New Roman",serif'>Playing Back Recorded Audio<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>Here’s
the code that outputs BUF_SIZE samples from the two buffers in memory:<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-size:9.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#C0504D;mso-themecolor:accent2'>void <span class=SpellE>audio_playback</span>(void)
{<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-size:9.0pt'><span
style='mso-spacerun:yes'>           </span><b><span style='color:#C0504D;
mso-themecolor:accent2'><span style='mso-spacerun:yes'> </span>int <span
class=SpellE>buffer_index</span> = <span class=GramE>0;</span><o:p></o:p></span></b></span></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'> </span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#C00000'><span style='mso-spacerun:yes'>            </span><span
class=SpellE>audiop</span>-&gt;control = 0x8; // clear the output FIFOs <o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#C00000'><span style='mso-spacerun:yes'>            </span><span
class=SpellE>audiop</span>-&gt;control = 0x0; // resume input conversion<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#C0504D;mso-themecolor:accent2'><span
style='mso-spacerun:yes'>           </span></span></b><b><span
style='font-size:9.0pt;color:#C00000'><span
style='mso-spacerun:yes'> </span>while (<span class=SpellE>buffer_index</span>
&lt; BUF_SIZE) {<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#C00000'><span style='mso-spacerun:yes'>              </span>//
output data if there is space in the output FIFOs<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#C00000'><span style='mso-spacerun:yes'>              </span>if (<span
class=SpellE>audiop</span>-&gt;<span class=SpellE>wsrc</span>) {<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#C00000'><span style='mso-tab-count:1'>       </span><span
style='mso-spacerun:yes'>           </span><span class=SpellE>audiop</span>-&gt;<span
class=SpellE>ldata</span> = <span class=SpellE>left_buffer</span>[<span
class=SpellE>buffer_index</span><span class=GramE>];</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#C00000'><span style='mso-spacerun:yes'>                  </span><span
class=SpellE>audiop</span>-&gt;<span class=SpellE>rdata</span> = <span
class=SpellE>right_buffer</span>[<span class=SpellE>buffer_index</span><span
class=GramE>];</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#C00000'><span style='mso-spacerun:yes'>                  </span>++<span
class=SpellE>buffer_<span class=GramE>index</span></span><span class=GramE>;</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#C00000'><span style='mso-spacerun:yes'>              </span>}<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#C00000'><span style='mso-spacerun:yes'>             </span>}<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#C00000'>}<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#C00000'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>The
code follows a similar logic to the one we used for the input: The outer while
repeats until the CPU managed to output all samples in the buffers. The if
checks that there is space at the output FIFOs and if so, copies the next pair
of samples from the buffers by writing to <span class=SpellE>audiop</span>-&gt;<span
class=SpellE>ldata</span> and <span class=SpellE>audiop</span>-&gt;<span
class=SpellE>rdata</span>.<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>Note
that the above code will spend most of its time busy waiting on the sound
device to either accept one more sample as output (when the output FIFOs are
filled in) or to produce one more input sample (when we drain the input FIFOs).
This is because the CPU is much faster <span class=SpellE><span class=GramE>then</span></span>
the audio conversion rate (100MHz vs. 8KHz).<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>Alternatively,
we may want to copy data only after the output FIFOs have been drained at 75% <i>empty
</i>and to read data when the input FIFOs are 75% full.<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>Here’s
how we can modify the <span class=SpellE>audio_<span class=GramE>record</span></span><span
class=GramE>(</span>)’s loop:<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'>#define FIFO_TRESHOLD 96 // 75% of
128<span style='mso-spacerun:yes'>            </span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span style='mso-spacerun:yes'>  
</span><span class=SpellE>buffer_index</span> = <span class=GramE>0;</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>            </span>while (<span class=SpellE>buffer_index</span>
&lt; BUF_SIZE) {<span style='mso-spacerun:yes'>   </span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>              </span>if (<span class=SpellE>audiop</span>-&gt;<span
class=SpellE>rarc</span> &gt; FIFO_THRESHOLD)<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                </span>while ((<span class=SpellE>audiop</span>-&gt;<span
class=SpellE>rarc</span>) &amp;&amp; (<span class=SpellE>buffer_index</span>
&lt; BUF_SIZE)) {<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                      </span><span class=SpellE>left_buffer</span>[<span
class=SpellE>buffer_index</span>] = <span class=SpellE>audiop</span>-&gt;<span
class=SpellE><span class=GramE>ldata</span></span><span class=GramE>;</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                      </span><span class=SpellE>right_buffer</span>[<span
class=SpellE>buffer_index</span>] = <span class=SpellE>audiop</span>-&gt;<span
class=SpellE><span class=GramE>rdata</span></span><span class=GramE>;</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                      </span>++<span class=SpellE>buffer_<span
class=GramE>index</span></span><span class=GramE>;</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                </span>} <o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                </span>// do something else<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                </span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>             </span>} <o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>The
“</span><b><span style='font-size:9.0pt;color:#1F497D;mso-themecolor:text2'>if
(<span class=SpellE>audiop</span>-&gt;<span class=SpellE>rarc</span> &gt;
FIFO_THRESHOLD)”</span></b><span style='font-family:"Times New Roman",serif'> statement
checks that the right input FIFO is at least 75% full before it attempts to
copy any data to the memory buffers. What follows is a while loop that reads
input samples as long as there are any (<span class=SpellE>audiop</span>-&gt;<span
class=SpellE><span class=GramE>rarc</span></span><span class=GramE> !</span>=
0) and as long we have not filled out memory buffers (<span class=SpellE>buffer_index</span>
&lt; BUF_SIZE).<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-family:
"Times New Roman",serif'>“Connect” the input to the <span class=GramE>output</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-family:
"Times New Roman",serif'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'>The
following code reads samples from the audio input queues and immediately places
them at the output queues. The effect is that whatever audio is being captured
by the microphone is immediately played back from the speakers (assuming the
input is connected to a microphone and the output to speakers).<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                </span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'>void<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span class=SpellE><b><span
style='font-size:9.0pt;color:#1F497D;mso-themecolor:text2'>audio_parrot</span></b></span><b><span
style='font-size:9.0pt;color:#1F497D;mso-themecolor:text2'>(void) {<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span style='mso-spacerun:yes'>  
</span><span class=SpellE>audiop</span>-&gt;control = 0xC; //clear all queues --
CW &amp; CR<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span style='mso-spacerun:yes'>  
</span><span class=SpellE>audiop</span>-&gt;control = 0; // resume conversion
in &amp; out<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span style='mso-spacerun:yes'>  
</span>while (1) <o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span style='mso-spacerun:yes'>     
</span>while (<span class=SpellE>audiop</span>-&gt;<span class=SpellE><span
class=GramE>rarc</span></span><span class=GramE> !</span>= 0) {<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                      </span><span class=SpellE>audiop</span>-&gt;<span
class=SpellE>ldata</span>; = audiop-&gt;<span class=GramE>ldata;</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                      </span><span class=SpellE>audiop</span>-&gt;<span
class=SpellE>rdata</span> = audiop-&gt;<span class=GramE>rdata;</span><o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span
style='mso-spacerun:yes'>                   </span>} <o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span style='font-size:
9.0pt;color:#1F497D;mso-themecolor:text2'><span style='mso-spacerun:yes'>   
</span>}<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span style='font-family:"Times New Roman",serif'><o:p>&nbsp;</o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><b><span lang=EN-CA
style='font-family:"Times New Roman",serif;mso-ansi-language:EN-CA'>Using words
for all audio device registers<o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><b><span lang=EN-CA
style='font-family:"Times New Roman",serif;mso-ansi-language:EN-CA'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span lang=EN-CA
style='font-family:"Times New Roman",serif;mso-ansi-language:EN-CA'>Thus far we
used 8b fields to access the FIFO occupancy counters individually. This is very
convenient. However, while this may be possible for the audio device, it may
not be possible to access the fields individually for some other device which
would require all accessed to be <span class=GramE>word-wide</span>. In this
case, we can declare all four “registers” as 32b words as follows:<o:p></o:p></span></p>

<p class=MsoPlainText style='text-align:justify'><span lang=EN-CA
style='font-family:"Times New Roman",serif;mso-ansi-language:EN-CA'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:9.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#1F497D;mso-themecolor:text2'>struct <span class=SpellE>audio_t</span> {<o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:9.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#1F497D;mso-themecolor:text2'><span style='mso-tab-count:1'>       </span>volatile
unsigned int <span class=GramE>control;</span><o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:9.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#1F497D;mso-themecolor:text2'><span style='mso-tab-count:1'>       </span>volatile
unsigned int status; // contains <span class=SpellE>wslc</span>, <span
class=SpellE>wsrc</span>, <span class=SpellE>ralc</span>, <span class=SpellE><span
class=GramE>rarc</span></span><o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:9.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#1F497D;mso-themecolor:text2'><span style='mso-spacerun:yes'> </span><span
style='mso-spacerun:yes'>     </span><span style='mso-spacerun:yes'> </span>volatile
unsigned int <span class=SpellE><span class=GramE>ldata</span></span><span
class=GramE>;</span><o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:9.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#1F497D;mso-themecolor:text2'><span style='mso-tab-count:1'>       </span>volatile
unsigned int <span class=SpellE><span class=GramE>rdata</span></span><span
class=GramE>;</span><o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:9.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#1F497D;mso-themecolor:text2'>};<o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman"'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span lang=EN-CA
style='font-family:"Times New Roman",serif;mso-ansi-language:EN-CA'>We can then
use standard C bitwise operations to access the individual fields. For <span
class=GramE>example</span> the following if statement checks that both output queue
counters are non-zero:<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
lang=EN-CA style='font-size:10.0pt;font-family:"Courier New";mso-fareast-font-family:
"Times New Roman";mso-ansi-language:EN-CA'><span
style='mso-spacerun:yes'> </span><o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:9.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#1F497D;mso-themecolor:text2'><span style='mso-spacerun:yes'>  </span>unsigned
int status = <span class=SpellE>audiop</span>-&gt;status; // this becomes a <span
class=SpellE>ldwio</span> AUDIO_BASE+4<o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:9.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#1F497D;mso-themecolor:text2'><span style='mso-spacerun:yes'>  </span>unsigned
int <span class=SpellE>wslc</span> = (status &gt;&gt; 24) &amp; 0xFF; // extract
bits 24-31 <o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:9.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#1F497D;mso-themecolor:text2'><span style='mso-spacerun:yes'>  </span>unsigned
int <span class=SpellE>wsrc</span> = (status &gt;&gt; 16) &amp; 0xFF; // extract
bits 16-23 <o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:9.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#1F497D;mso-themecolor:text2'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:9.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#1F497D;mso-themecolor:text2'><span style='mso-spacerun:yes'>  </span>if ((<span
class=SpellE><span class=GramE>wsrc</span></span><span class=GramE> !</span>=0)
&amp;&amp; (<span class=SpellE>wslc</span> != 0)) {<o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:9.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#1F497D;mso-themecolor:text2'><span style='mso-spacerun:yes'>    
</span>CODE GOES HERE<o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
style='font-size:9.0pt;font-family:"Courier New";mso-fareast-font-family:"Times New Roman";
color:#1F497D;mso-themecolor:text2'><span style='mso-spacerun:yes'>  </span>} <o:p></o:p></span></b></p>

<p class=MsoPlainText style='text-align:justify'><span lang=EN-CA
style='font-family:"Times New Roman",serif;mso-ansi-language:EN-CA'><o:p>&nbsp;</o:p></span></p>

</div>

</body>

</html>
